(this["webpackJsonptemplatemonsters-r-task"]=this["webpackJsonptemplatemonsters-r-task"]||[]).push([[0],{33:function(e,t,a){},34:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),r=a.n(c),s=a(20),i=a.n(s),o=a(8),l=a(2),u=a(11),j=a.n(u),d=a(13),h=a(9),b=function(){var e=Object(d.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://picsum.photos"+t,e.next=3,fetch(a);case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Could not fetch the ".concat(a,", received: ").concat(n.status));case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p="success",m="failed",O="pending",f="idle",x="first",g="previous",v="next",N="localStorage",_=function(e){var t=Object(c.useState)(null),a=Object(h.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(f),i=Object(h.a)(s,2),o=i[0],l=i[1],u=Object(c.useCallback)(Object(d.a)(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(O),r(null),t.next=5,b(e);case 5:a=t.sent,r(a),l(p),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),l(m),r(null);case 14:case"end":return t.stop()}}),t,null,[[0,10]])}))),[e]);return Object(c.useEffect)((function(){u()}),[e,u]),{data:n,status:o}},k=r.a.createContext(),w=function(){return Object(c.useContext)(k)},y=a(4),C=a.n(y),P=(C.a.shape({id:C.a.string,author:C.a.string,download_url:C.a.string,url:C.a.string,height:C.a.number,width:C.a.number}),a(19)),F=a(24),S=a(21),T=(a(33),function(e){var t=e.children,a=e.type,c=e.className,r=e.variant,s=Object(F.a)(e,["children","type","className","variant"]);return Object(n.jsx)("button",Object(P.a)(Object(P.a)({type:a,className:Object(S.a)("custom-button",{"button-primary":"primary"===r,"button-dark":"dark"===r},c)},s),{},{children:t}))});T.defaultProps={type:"button",children:"button",variant:"dark"};var E=T,L=(a(34),function(e){var t=e.item,a=t.download_url,c=t.id,r=Object(l.g)(),s=w().handleRemoveFromFavorites,i="/favorites"===r.location.pathname;return Object(n.jsx)("article",{className:"gallery__item",children:Object(n.jsxs)(o.b,{to:"/photo/".concat(c),children:[Object(n.jsx)("img",{className:"gallery__image",src:a,alt:""}),i&&Object(n.jsx)(E,{variant:"primary",className:"gallery__item--remove",label:"get more details",onClick:function(e){return s(e,c)},children:"Remove"})]})})}),A=(a(41),function(e){var t=e.items;return Object(n.jsx)("article",{className:"gallery",children:null===t||void 0===t?void 0:t.map((function(e){return Object(n.jsx)(L,{item:e},e.id)}))})}),I=function(){var e=w().favorites;return Object(n.jsx)("section",{className:"favorites-page",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{className:"page-title",children:"Favorites photos"}),e.length>0?Object(n.jsx)(A,{items:e}):Object(n.jsx)("p",{className:"info-message",children:"There are no favorite photos yet"})]})})},J=a(51),B=(a(42),function(e){var t=e.onPageChange,a=e.currentPage,r=e.status,s=x,i=v,o=g,l=Object(c.useMemo)((function(){return r===O}),[r]);return Object(n.jsx)("div",{className:"pagination",children:Object(n.jsxs)("div",{className:"pagination__buttons",children:[Object(n.jsx)(E,{disabled:l,onClick:t(s),children:"Back to first"}),Object(n.jsx)(E,{disabled:l,onClick:t(o),children:"Previous"}),Object(n.jsxs)("span",{className:"pagination__current-page",children:["Page: ",a]}),Object(n.jsx)(E,{disabled:l,onClick:t(i),children:"Next"})]})})}),z=r.a.memo(B),R=(a(43),function(){var e=w(),t=e.page,a=e.status,c=e.handlePageChange,r=e.setLimitPerPage,s=Object(J.a)((function(e){r(e)}),2e3);return Object(n.jsxs)("div",{className:"filters",children:[Object(n.jsx)(z,{onPageChange:c,currentPage:t,status:a}),Object(n.jsxs)("label",{children:[Object(n.jsx)("span",{className:"limit-text",children:"Limit of photos per page: "}),Object(n.jsx)("input",{className:"limit",type:"number",defaultValue:6,onChange:function(e){return s.callback(e.target.value)}})]})]})}),V=(a(44),function(){return Object(n.jsx)("div",{className:"preloader",children:Object(n.jsx)("div",{className:"preloader__inner"})})}),D=function(){var e=w(),t=e.data,a=e.status,c=e.page,r=e.setPage,s=p,i=O,o=m,l=t&&t.length>0,u=a===s&&0===t.length,j=a===i,d=a===o;return Object(n.jsx)("main",{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{className:"page-title",children:"Home page"}),Object(n.jsx)(R,{}),l&&Object(n.jsx)(A,{items:t}),j&&Object(n.jsx)(V,{}),u&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("p",{className:"info-message",children:"Photos not found!"}),1!==c&&Object(n.jsx)(E,{onClick:function(){return r(1)},children:"Back to the first page"})]}),d&&Object(n.jsx)("p",{children:"Error has gone"})]})})},H=(a(45),function(){var e=Object(l.h)().id,t=_("/id/".concat(e,"/info")),a=t.data,c=t.status,r=w().handleAddToFavorites;if(!a)return null;var s=a.download_url,i=a.author,o=a.width,u=a.height,j=O,d=p,h=m;return Object(n.jsx)("article",{className:"photo-page",children:Object(n.jsxs)("div",{className:"container",children:[c===j&&Object(n.jsx)(V,{}),c===d&&Object(n.jsxs)(n.Fragment,{children:[s&&Object(n.jsx)("div",{className:"photo-page__image-wrapper",children:Object(n.jsx)("img",{className:"photo-page__image",src:s,alt:""})}),Object(n.jsxs)("div",{className:"photo-page__content",children:[i&&Object(n.jsxs)("p",{className:"photo-page__author",children:["Author: ",i]}),Object(n.jsxs)("div",{className:"photo-page__size",children:[o&&Object(n.jsxs)("p",{className:"photo-page__size-item",children:["Width: ",o]}),u&&Object(n.jsxs)("p",{className:"photo-page__size-item",children:["height: ",u]})]}),Object(n.jsx)(E,{onClick:function(){return r(a)},children:"Add to the favorites"})]})]}),c===h&&Object(n.jsx)("p",{children:"Something went wrong!"})]})})}),M=function(){return Object(n.jsxs)(l.d,{children:[Object(n.jsx)(l.b,{path:"/",component:D,exact:!0}),Object(n.jsx)(l.b,{path:"/photo/:id",component:H,exact:!0}),Object(n.jsx)(l.b,{path:"/favorites",component:I,exact:!0}),Object(n.jsx)(l.a,{to:"/"})]})},W=(a(46),function(){return Object(n.jsx)("header",{className:"header",children:Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("nav",{className:"header__navigation",children:[Object(n.jsx)(o.c,{className:"header__link",to:"/",exact:!0,children:"Home"}),Object(n.jsx)(o.c,{className:"header__link",to:"/favorites",exact:!0,children:"Favorites"})]})})})}),q=a(23),G=function(e){var t=e.children,a=Object(c.useState)(1),r=Object(h.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)(6),l=Object(h.a)(o,2),u=l[0],j=l[1],d=_("/v2/list?page=".concat(s,"&limit=").concat(u)),b=d.data,p=d.status,m=function(e){var t=e.key,a=e.initialValue,n=e.storageType,r=void 0===n?N:n,s=Object(c.useState)((function(){try{var e=window[r].getItem(t);return e?JSON.parse(e):a}catch(n){return console.log("useLocalStorage error: ",n),a}})),i=Object(h.a)(s,2),o=i[0],l=i[1];return Object(c.useEffect)((function(){var e=window[r].getItem(t);e&&l(JSON.parse(e))}),[]),Object(c.useEffect)((function(){window[r].setItem(t,JSON.stringify(o))}),[o]),[o,l]}({key:"photos-app-favorites",initialValue:[]}),O=Object(h.a)(m,2),f=O[0],w=O[1],y=Object(c.useCallback)((function(e){return function(){switch(e){case v:i((function(e){return e+1}));break;case g:s>1&&i((function(e){return e-1}));break;case x:1!==s&&i(1);break;default:i(1)}}}),[s]),C=Object(c.useCallback)((function(e){f.find((function(t){return t.id===e.id}))?alert("The photo is already in the favorites!"):w([].concat(Object(q.a)(f),[e]))}),[f,w]),P=Object(c.useCallback)((function(e,t){e.preventDefault();var a=f.filter((function(e){return e.id!==t}));w(a)}),[f,w]);return Object(n.jsx)(k.Provider,{value:{handleAddToFavorites:C,handleRemoveFromFavorites:P,handlePageChange:y,setLimitPerPage:j,limitPerPage:u,page:s,data:b,status:p,favorites:f},children:t})},K=(a(47),a(48),function(){return Object(n.jsx)(G,{children:Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(W,{}),Object(n.jsx)(M,{})]})})}),Q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,52)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(o.a,{children:Object(n.jsx)(K,{})})}),document.getElementById("root")),Q()}},[[49,1,2]]]);
//# sourceMappingURL=main.4efd0b0d.chunk.js.map