(this["webpackJsonptemplatemonsters-r-task"]=this["webpackJsonptemplatemonsters-r-task"]||[]).push([[0],{33:function(e,t,a){},34:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),r=a.n(c),s=a(20),i=a.n(s),o=a(8),l=a(2),u=a(11),j=a.n(u),d=a(13),h=a(9),b="success",p="failed",m="pending",f="idle",O="first",g="previous",x="next",v="localStorage",N="sessionStorage",_="https://picsum.photos",k=function(){var e=Object(d.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_+t,e.next=3,fetch(a);case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Could not fetch the ".concat(a,", received: ").concat(n.status));case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var t=Object(c.useState)(null),a=Object(h.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(f),i=Object(h.a)(s,2),o=i[0],l=i[1],u=Object(c.useCallback)(Object(d.a)(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(m),r(null),t.next=5,k(e);case 5:a=t.sent,r(a),l(b),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),l(p),r(null);case 14:case"end":return t.stop()}}),t,null,[[0,10]])}))),[e]);return Object(c.useEffect)((function(){u()}),[e,u]),{data:n,status:o}},w=function(e){var t=e.key,a=e.initialValue,n=e.storageType,r=void 0===n?v:n,s=Object(c.useState)((function(){try{var e=window[r].getItem(t);return e?JSON.parse(e):a}catch(n){return console.log("useLocalStorage error: ",n),a}})),i=Object(h.a)(s,2),o=i[0],l=i[1];return Object(c.useEffect)((function(){var e=window[r].getItem(t);e&&l(JSON.parse(e))}),[]),Object(c.useEffect)((function(){window[r].setItem(t,JSON.stringify(o))}),[o]),[o,l]},C=r.a.createContext(),P=function(){return Object(c.useContext)(C)},F=a(4),S=a.n(F),T=(S.a.shape({id:S.a.string,author:S.a.string,download_url:S.a.string,url:S.a.string,height:S.a.number,width:S.a.number}),a(19)),A=a(24),E=a(21),L=(a(33),function(e){var t=e.children,a=e.type,c=e.className,r=e.variant,s=Object(A.a)(e,["children","type","className","variant"]);return Object(n.jsx)("button",Object(T.a)(Object(T.a)({type:a,className:Object(E.a)("custom-button",{"button-primary":"primary"===r,"button-dark":"dark"===r},c)},s),{},{children:t}))});L.defaultProps={type:"button",children:"button",variant:"dark"};var I=L,J=function(e){var t=e.id;return"".concat(_,"/id/").concat(t,"/").concat(400,"/").concat(400)},B=(a(34),function(e){var t=e.item,a=Object(l.g)().location,c=P(),r=c.handleRemoveFromFavorites,s=c.handleAddToFavorites,i="/favorites"===a.pathname,u="/"===a.pathname;return Object(n.jsx)("article",{className:"gallery__item",children:Object(n.jsxs)(o.b,{to:"/photo/".concat(t.id),children:[Object(n.jsx)("img",{className:"gallery__image",src:J(t),alt:""}),i&&Object(n.jsx)(I,{variant:"primary",className:"gallery__item--remove",label:"remove from favorites",onClick:function(e){return r(e,t.id)},children:"Remove"}),u&&Object(n.jsx)(I,{className:"gallery__item--add",label:"add to favorites",onClick:function(e){return s(e,t)},children:"Add to Favorites"})]})})}),V=(a(41),function(e){var t=e.items;return Object(n.jsx)("article",{className:"gallery",children:null===t||void 0===t?void 0:t.map((function(e){return Object(n.jsx)(B,{item:e},e.id)}))})}),z=function(){var e=P().favorites;return Object(n.jsx)("section",{className:"favorites-page",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{className:"page-title",children:"Favorites photos"}),e.length>0?Object(n.jsx)(V,{items:e}):Object(n.jsx)("p",{className:"info-message",children:"There are no favorite photos yet"})]})})},D=a(51),R=(a(42),function(e){var t=e.onPageChange,a=e.currentPage,r=e.status,s=O,i=x,o=g,l=Object(c.useMemo)((function(){return r===m}),[r]),u=1===a;return Object(n.jsx)("div",{className:"pagination",children:Object(n.jsxs)("div",{className:"pagination__buttons",children:[Object(n.jsx)(I,{disabled:l||u,onClick:t(s),children:"Back to first"}),Object(n.jsx)(I,{disabled:l||u,onClick:t(o),children:"Previous"}),Object(n.jsxs)("span",{className:"pagination__current-page",children:["Page: ",a]}),Object(n.jsx)(I,{disabled:l,onClick:t(i),children:"Next"})]})})}),H=r.a.memo(R),M=(a(43),function(){var e=P(),t=e.page,a=e.status,c=e.handlePageChange,r=e.setLimitPerPage,s=Object(D.a)((function(e){r(e)}),1500);return Object(n.jsxs)("div",{className:"filters",children:[Object(n.jsx)(H,{onPageChange:c,currentPage:t,status:a}),Object(n.jsxs)("label",{children:[Object(n.jsx)("span",{className:"limit-text",children:"Limit of photos per page: "}),Object(n.jsx)("input",{className:"limit",type:"number",defaultValue:20,onChange:function(e){return s.callback(e.target.value)}})]})]})}),W=(a(44),function(){return Object(n.jsx)("div",{className:"preloader",children:Object(n.jsx)("div",{className:"preloader__inner"})})}),q=function(){var e=P(),t=e.data,a=e.status,c=e.page,r=e.setPage,s=b,i=m,o=p,l=t&&t.length>0,u=a===s&&0===t.length,j=a===i,d=a===o;return Object(n.jsx)("main",{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{className:"page-title",children:"Home page"}),Object(n.jsx)(M,{}),l&&Object(n.jsx)(V,{items:t}),j&&Object(n.jsx)(W,{}),u&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("p",{className:"info-message",children:"Photos not found!"}),1!==c&&Object(n.jsx)(I,{onClick:function(){return r(1)},children:"Back to the first page"})]}),d&&Object(n.jsx)("p",{children:"Error has gone"})]})})},G=(a(45),function(){var e=Object(l.h)().id,t=y("/id/".concat(e,"/info")),a=t.data,c=t.status,r=P().handleAddToFavorites;if(!a)return null;var s=a.download_url,i=a.author,o=a.width,u=a.height,j=m,d=b,h=p;return Object(n.jsx)("article",{className:"photo-page",children:Object(n.jsxs)("div",{className:"container",children:[c===j&&Object(n.jsx)(W,{}),c===d&&Object(n.jsxs)(n.Fragment,{children:[s&&Object(n.jsx)("div",{className:"photo-page__image-wrapper",children:Object(n.jsx)("img",{className:"photo-page__image",src:s,alt:""})}),Object(n.jsxs)("div",{className:"photo-page__content",children:[i&&Object(n.jsxs)("p",{className:"photo-page__author",children:["Author: ",i]}),Object(n.jsxs)("div",{className:"photo-page__size",children:[o&&Object(n.jsxs)("p",{className:"photo-page__size-item",children:["Width: ",o]}),u&&Object(n.jsxs)("p",{className:"photo-page__size-item",children:["height: ",u]})]}),Object(n.jsx)(I,{onClick:function(){return r(a)},children:"Add to the favorites"})]})]}),c===h&&Object(n.jsx)("p",{children:"Something went wrong!"})]})})}),K=function(){return Object(n.jsxs)(l.d,{children:[Object(n.jsx)(l.b,{path:"/",component:q,exact:!0}),Object(n.jsx)(l.b,{path:"/photo/:id",component:G,exact:!0}),Object(n.jsx)(l.b,{path:"/favorites",component:z,exact:!0}),Object(n.jsx)(l.a,{to:"/"})]})},Q=(a(46),function(){return Object(n.jsx)("header",{className:"header",children:Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("nav",{className:"header__navigation",children:[Object(n.jsx)(o.c,{className:"header__link",to:"/",exact:!0,children:"Home"}),Object(n.jsx)(o.c,{className:"header__link",to:"/favorites",exact:!0,children:"Favorites"})]})})})}),U=a(23),X=function(e){var t=e.children,a=w({initialValue:1,storageType:N,key:"photos-app-page"}),r=Object(h.a)(a,2),s=r[0],i=r[1],o=w({key:"photos-app-favorites",initialValue:[]}),l=Object(h.a)(o,2),u=l[0],j=l[1],d=Object(c.useState)(20),b=Object(h.a)(d,2),p=b[0],m=b[1],f=y("/v2/list?page=".concat(s,"&limit=").concat(p)),v=f.data,_=f.status,k=Object(c.useCallback)((function(e){return function(){switch(e){case x:i((function(e){return e+1}));break;case g:s>1&&i((function(e){return e-1}));break;case O:1!==s&&i(1);break;default:i(1)}}}),[s,i]),P=Object(c.useCallback)((function(e,t){e.preventDefault(),u.find((function(e){return e.id===t.id}))?alert("The photo is already in the favorites!"):j([].concat(Object(U.a)(u),[t]))}),[u,j]),F=Object(c.useCallback)((function(e,t){e.preventDefault();var a=u.filter((function(e){return e.id!==t}));j(a)}),[u,j]);return Object(n.jsx)(C.Provider,{value:{handleAddToFavorites:P,handleRemoveFromFavorites:F,handlePageChange:k,setLimitPerPage:m,limitPerPage:p,setPage:i,page:s,data:v,status:_,favorites:u},children:t})},Y=(a(47),a(48),function(){return Object(n.jsx)(X,{children:Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(Q,{}),Object(n.jsx)(K,{})]})})}),Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,52)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(o.a,{children:Object(n.jsx)(Y,{})})}),document.getElementById("root")),Z()}},[[49,1,2]]]);
//# sourceMappingURL=main.8e6282d0.chunk.js.map